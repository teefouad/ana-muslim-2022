/**
 * Dependency imports
 */
import React from 'react';
import styled from '@emotion/styled';
import { css } from '@emotion/react';
import classnames from 'classnames';
import Color from 'color';

/**
 * Local imports
 */
import Aya from '../common/Aya';
import Text from '../common/Text';
import StackedDiacritics from '../common/StackedDiacritics';
import StyledDiacritics from '../common/StyledDiacritics';
import { toRem, removeDiacritics } from '../../utils/text';
import ParenthesesSVG from '../../public/img/svgr/parentheses.svg';
import surasData from '../../data/suras.json';

/**
 * Constants
 */
const suraNameColorizationData: any = {
  1: '0.6273,0.3523:0.7983,0.2196:0.0385;0.6188,0.3931:0.653,0.4645:0.0385;0.3966,0.1788:0.2085,0.3319:0.0769;0.2085,0.3319:0.1402,0.4441:0.0769;0.4222,0.6788:0.4735,0.6584:0.0769',
  2: '0.6502,0.3829:0.6502,0.3829:0.1212;0.6401,0.2706:0.3572,0.4441:0.1212;0.337,0.4747:0.337,0.4747:0.1212;0.1249,0.689:0.1249,0.689:0.1212',
  3: '0.8668,0.1686:0.8668,0.1686:0.08;0.8868,0.2196:0.8868,0.2196:0.08;0.8468,0.2196:0.8468,0.2196:0.08;0.8935,0.2706:0.8935,0.2706:0.0367;0.8402,0.2604:0.8402,0.2604:0.0367;0.7402,0.4543:0.7735,0.4237:0.0367;0.6068,0.6074:0.5668,0.638:0.0367;0.4535,0.6788:0.4535,0.7809:0.0667;0.4468,0.3727:0.3535,0.4645:0.0667;0.2068,0.3523:0.1602,0.4033:0.0667',
  4: '0.6785,0.3931:0.3839,0.4033:0.1071;0.6874,0.7298:0.5267,0.7196:0.1071;0.5803,0.6992:0.5803,0.6992:0.1071;0.1964,0.7298:0.1517,0.7502:0.1071',
  5: '0.6404,0.2298:0.7253,0.189:0.1132;0.7064,0.7298:0.7253,0.7809:0.1132;0.6498,0.4849:0.6215,0.4441:0.1132;0.3668,0.2911:0.3008,0.3421:0.1132;0.4517,0.7298:0.4329,0.7502:0.1132;0.131,0.7094:0.131,0.7094:0.1132',
  6: '0.5785,0.3523:0.4425,0.4033:0.096;0.5545,0.689:0.5545,0.689:0.096;0.2425,0.74:0.2105,0.7706:0.096',
  7: '0.421,0.1992:0.421,0.2094:0.1034;0.5072,0.5155:0.5072,0.5155:0.1034;0.2313,0.7706:0.1882,0.7911:0.1034',
  8: '0.4547,0.4951:0.4547,0.4951:0.1053;0.288,0.7706:0.2441,0.8013:0.1053;0.4547,0.4033:0.5862,0.3013:0.0526',
  9: '0.647,0.3727:0.647,0.3727:0.1176;0.5784,0.4543:0.5784,0.4543:0.1176;0.6176,0.2911:0.3725,0.4135:0.1176;0.2353,0.3421:0.1372,0.4339:0.1176;0.2745,0.74:0.2745,0.74:0.1176',
  10: '0.7014,0.4645:0.8058,0.3421:0.1043;0.5362,0.4033:0.5884,0.3319:0.1043;0.2579,0.4135:0.4145,0.3217:0.1043;0.2753,0.3013:0.2753,0.3013:0.1043;0.3797,0.7502:0.4232,0.7298:0.1043',
  11: '0.5253,0.4849:0.6319,0.4135:0.16;0.4853,0.4033:0.6453,0.24:0.16;0.2586,0.7706:0.2053,0.8013:0.16',
  12: '0.7896,0.3931:0.7542,0.4339:0.1062;0.5241,0.4237:0.471,0.5053:0.1062;0.356,0.3421:0.2763,0.3727:0.1062;0.533,0.6788:0.4799,0.7094:0.0398',
  13: '0.6801,0.4849:0.6702,0.3829:0.1188;0.4425,0.4033:0.3533,0.3931:0.1188;0.3533,0.3931:0.3632,0.4339:0.1188;0.2444,0.7502:0.185,0.7809:0.1188',
  14: '0.6957,0.4339:0.6957,0.4339:0.1071;0.6064,0.2094:0.5796,0.1584:0.1071;0.4814,0.3829:0.4278,0.4339:0.1071;0.41,0.3217:0.2761,0.4441:0.1071;0.5082,0.6584:0.5082,0.6584:0.1071',
  15: '0.6006,0.6788:0.6006,0.6788:0.1237;0.1676,0.8115:0.1676,0.8115:0.1237;0.3429,0.3523:0.3429,0.3523:0.1237;0.4975,0.3727:0.5078,0.4339:0.1237',
  16: '0.7431,0.2094:0.6138,0.3013:0.1034;0.6827,0.3829:0.6827,0.3829:0.1034;0.562,0.6788:0.562,0.6788:0.1034;0.5017,0.7094:0.5017,0.7094:0.1034;0.3206,0.7502:0.2862,0.7706:0.1034',
  17: '0.531,0.4645:0.4485,0.4645:0.1237;0.2939,0.1992:0.2939,0.1686:0.1237;0.2114,0.7298:0.1805,0.7502:0.1237',
  18: '0.6814,0.24:0.4379,0.4135:0.1043;0.4292,0.4339:0.4379,0.4951:0.1043;0.3161,0.74:0.2727,0.7604:0.1043',
  19: '0.8542,0.3523:0.6724,0.4543:0.1212;0.6522,0.2809:0.3795,0.4033:0.1212;0.7734,0.74:0.7734,0.7706:0.1212;0.2684,0.7604:0.2785,0.8115:0.1212',
  20: '0.6657,0.3829:0.6657,0.3931:0.1791;0.3075,0.3829:0.3523,0.4237:0.1791',
  21: '0.5367,0.3523:0.4442,0.4339:0.0972;0.2497,0.1992:0.2682,0.2196:0.0972;0.1942,0.7196:0.1479,0.7502:0.0972;0.5738,0.7809:0.5182,0.8217:0.0972',
  22: '0.501,0.2094:0.4269,0.2502:0.1481',
  23: '0.7048,0.1686:0.6602,0.24:0.1071;0.6423,0.3523:0.6423,0.3523:0.1071;0.4727,0.3523:0.4191,0.4237:0.1071;0.2673,0.3523:0.2316,0.3727:0.1071;0.7584,0.7298:0.7584,0.7809:0.1071;0.5084,0.7196:0.5084,0.7196:0.1071',
  24: '0.5584,0.3727:0.5584,0.3727:0.1481;0.5707,0.2196:0.4349,0.3625:0.1481;0.2374,0.3421:0.2374,0.4135:0.1481',
  25: '0.38,0.1686:0.38,0.2094:0.1026;0.6792,0.2911:0.6365,0.4135:0.1026;0.6279,0.2706:0.4741,0.3421:0.1026;0.457,0.4543:0.457,0.4543:0.1026;0.2262,0.7809:0.1835,0.8013:0.1026;0.4655,0.5155:0.4655,0.5155:0.1026',
  26: '0.6054,0.3829:0.615,0.2706:0.1154;0.4612,0.4441:0.3939,0.4135:0.1154;0.2689,0.1992:0.2689,0.1992:0.1154',
  27: '0.5919,0.3421:0.5221,0.2706:0.1395;0.5686,0.2502:0.5686,0.2502:0.1395;0.2779,0.2604:0.2896,0.4135:0.1395',
  28: '0.7196,0.2298:0.4569,0.4033:0.1017;0.3213,0.4033:0.3213,0.4033:0.1017;0.567,0.689:0.5162,0.7196:0.1017',
  29: '0.724,0.3523:0.6855,0.3931:0.0923;0.6471,0.3625:0.6471,0.3625:0.0923;0.3702,0.4033:0.3394,0.4543:0.0923',
  30: '0.656,0.4747:0.6455,0.3829:0.1263;0.5086,0.4339:0.435,0.4849:0.1263;0.3086,0.6992:0.256,0.74:0.0526',
  31: '0.8198,0.189:0.7573,0.24:0.1071;0.7305,0.3421:0.6144,0.4339:0.1071;0.6144,0.3319:0.4715,0.4135:0.1071;0.4715,0.3523:0.4805,0.2809:0.1071;0.2215,0.3625:0.2215,0.3625:0.1071',
  32: '0.6147,0.3931:0.6252,0.3013:0.125;0.4689,0.4135:0.4689,0.2604:0.125;0.3022,0.3523:0.3647,0.3217:0.125',
  33: '0.657,0.1992:0.657,0.1992:0.0945;0.3656,0.1992:0.3656,0.1992:0.0945;0.4444,0.3727:0.4444,0.3727:0.0945;0.2397,0.3727:0.2397,0.4339:0.0945;0.594,0.6686:0.594,0.6686:0.0945',
  34: '0.7551,0.3625:0.5371,0.4645:0.1538;0.4986,0.3625:0.332,0.4543:0.1538;0.2294,0.7094:0.2038,0.7298:0.1538;0.7038,0.6992:0.6525,0.7298:0.1538',
  35: '0.7395,0.3421:0.7395,0.3421:0.1519;0.6382,0.1992:0.6382,0.1992:0.1519;0.499,0.6992:0.499,0.6992:0.1519',
  36: '0.7319,0.4441:0.7319,0.3931:0.1319;0.7319,0.3931:0.622,0.4339:0.1319;0.3913,0.4441:0.3913,0.4441:0.1319;0.5451,0.7298:0.4792,0.7706:0.1319',
  37: '0.5779,0.5155:0.5543,0.3931:0.0945;0.5543,0.3931:0.6803,0.2809:0.0945;0.6488,0.4237:0.6488,0.4237:0.0945;0.4204,0.3115:0.4204,0.3217:0.0787;0.2,0.7196:0.1685,0.74:0.0787',
  38: '0.5699,0.4237:0.4865,0.3217:0.1667;0.5838,0.3115:0.5838,0.3115:0.1667',
  39: '0.624,0.2604:0.624,0.3421:0.1263;0.6134,0.3727:0.4871,0.4645:0.1263;0.4661,0.4033:0.4661,0.4033:0.1263;0.2345,0.4645:0.2345,0.4645:0.1263',
  40: '0.743,0.3217:0.5567,0.4237:0.1176;0.4979,0.7502:0.4979,0.8013:0.1176;0.292,0.7298:0.1548,0.8319:0.1176',
  41: '0.7953,0.3217:0.6703,0.4033:0.1154;0.5068,0.189:0.3049,0.3727:0.1154;0.6511,0.74:0.6511,0.74:0.1154',
  42: '0.6529,0.1992:0.5681,0.3829:0.1017;0.6359,0.3727:0.6359,0.3727:0.1017;0.3986,0.4237:0.3986,0.4237:0.1017;0.2122,0.3931:0.2122,0.3727:0.1017',
  43: '0.6847,0.3625:0.6935,0.2706:0.1053;0.5531,0.3727:0.4567,0.3523:0.1053;0.4391,0.4135:0.4391,0.4135:0.1053;0.29,0.3421:0.29,0.2094:0.1053',
  44: '0.6881,0.3319:0.6881,0.3319:0.0938;0.6881,0.3319:0.6881,0.3319:0.0938;0.7037,0.2502:0.7037,0.2502:0.0938;0.5944,0.3115:0.4459,0.4135:0.0938;0.4459,0.4543:0.4459,0.4543:0.0938;0.2037,0.7809:0.1725,0.8013:0.0938',
  45: '0.6845,0.189:0.6616,0.2094:0.0916;0.5929,0.4339:0.6006,0.4747:0.0916;0.3639,0.4033:0.2494,0.5053:0.0344;0.3945,0.7094:0.3563,0.7502:0.0344',
  46: '0.7114,0.189:0.4268,0.3727:0.0876;0.58,0.3829:0.58,0.3829:0.0876;0.4195,0.4951:0.4195,0.4951:0.0876;0.6165,0.689:0.6165,0.689:0.0876;0.1786,0.7706:0.1786,0.8217:0.0876;0.2297,0.3523:0.2297,0.3523:0.0876',
  47: '0.7438,0.2706:0.5417,0.4237:0.1212;0.5619,0.4645:0.5619,0.4645:0.1212;0.2286,0.2604:0.2286,0.3115:0.1212',
  48: '0.5999,0.3727:0.4763,0.3727:0.1348',
  49: '0.7003,0.1686:0.5693,0.4339:0.0828;0.3969,0.4645:0.3969,0.4645:0.0828;0.3141,0.1992:0.3141,0.1992:0.0828',
  50: '0.4791,0.24:0.5653,0.3319:0.2069;0.6171,0.24:0.6171,0.24:0.2069',
  51: '0.6989,0.2094:0.7066,0.2604:0.0923;0.5143,0.3319:0.422,0.4237:0.0923;0.4374,0.4951:0.4374,0.4951:0.0923',
  52: '0.1943,0.8013:0.1943,0.8013:0.1395;0.578,0.3625:0.5664,0.2706:0.1395;0.5083,0.3421:0.5083,0.3421:0.0465',
  53: '0.562,0.2604:0.562,0.3217:0.1519;0.4228,0.4339:0.4228,0.4339:0.1519;0.3848,0.7604:0.3848,0.8217:0.1519',
  54: '0.7366,0.1992:0.3655,0.4237:0.1237;0.2417,0.4441:0.1902,0.4849:0.1237;0.3861,0.7706:0.3861,0.8319:0.1237',
  55: '0.738,0.4033:0.738,0.4747:0.096;0.53,0.3727:0.362,0.3829:0.096;0.194,0.4339:0.194,0.3013:0.096;0.386,0.7196:0.386,0.8013:0.096;0.562,0.6584:0.562,0.6584:0.096',
  56: '0.7146,0.4237:0.7226,0.4543:0.096;0.6746,0.4747:0.6746,0.4747:0.096;0.4506,0.3829:0.3466,0.4339:0.096;0.3466,0.4339:0.3386,0.3829:0.096;0.4506,0.689:0.4506,0.689:0.096;0.5146,0.7502:0.5146,0.7502:0.096',
  57: '0.6282,0.2196:0.1324,0.3421:0.1026;0.5427,0.4339:0.5427,0.4849:0.1026;0.3547,0.7502:0.3547,0.7502:0.1026',
  58: '0.758,0.1992:0.5493,0.4441:0.0863;0.535,0.3829:0.535,0.2911:0.0863;0.3983,0.3727:0.3623,0.4033:0.0863;0.1681,0.3523:0.1105,0.4237:0.0863',
  59: '0.524,0.2196:0.491,0.189:0.1319;0.2272,0.7706:0.2272,0.7706:0.1319',
  60: '0.7235,0.2094:0.583,0.3727:0.0992;0.5086,0.3421:0.4011,0.4135:0.0992;0.3929,0.3217:0.2854,0.4033:0.0992;0.6821,0.7706:0.6821,0.8115:0.0992',
  61: '0.6186,0.2809:0.501,0.3625:0.1176;0.5696,0.4237:0.5696,0.4237:0.1176;0.3441,0.74:0.2951,0.7502:0.1176',
  62: '0.6256,0.2094:0.4165,0.4033:0.1091;0.2165,0.3421:0.1256,0.4237:0.1091;0.4165,0.6992:0.4165,0.6992:0.1091;0.6075,0.3931:0.562,0.4747:0.1091;0.5075,0.5666:0.5529,0.5257:0.0364',
  63: '0.799,0.1788:0.7552,0.2196:0.0876;0.7333,0.3013:0.653,0.3931:0.0876;0.5143,0.6992:0.5143,0.6992:0.0876;0.4049,0.3319:0.3538,0.3829:0.0876;0.2005,0.2911:0.1932,0.3625:0.0876;0.4778,0.3727:0.4778,0.3727:0.0474;0.4705,0.4033:0.4778,0.4543:0.0474;0.4778,0.4849:0.4778,0.4849:0.0474',
  64: '0.7944,0.1788:0.4765,0.4135:0.093;0.7091,0.3625:0.7091,0.3625:0.093;0.3215,0.4135:0.2905,0.4543:0.093',
  65: '0.7503,0.1074:0.5337,0.2502:0.1;0.4253,0.1992:0.4253,0.1992:0.1;0.692,0.3727:0.692,0.3727:0.1',
  66: '0.6671,0.3013:0.6671,0.3523:0.096;0.3151,0.4033:0.3311,0.4747:0.096;0.1871,0.4849:0.1871,0.4849:0.096',
  67: '0.4699,0.1992:0.4699,0.1992:0.1165;0.6932,0.1176:0.5767,0.2706:0.1165;0.6253,0.3931:0.6253,0.4645:0.1165;0.3146,0.74:0.3146,0.74:0.1165',
  68: '0.5105,0.1584:0.3005,0.2706:0.12;0.2705,0.74:0.2705,0.74:0.12;0.5505,0.4849:0.5505,0.3625:0.12;0.5505,0.3625:0.7205,0.2094:0.12',
  69: '0.6973,0.0053:0.2241,0.3217:0.1071;0.1973,0.3625:0.1437,0.4237:0.1071;0.3402,0.3523:0.3402,0.3523:0.1071;0.5991,0.2298:0.6973,0.189:0.1071;0.5098,0.4339:0.5812,0.4339:0.1071',
  70: '0.6635,0.2094:0.811,0.1482:0.0984;0.6061,0.3217:0.5569,0.3829:0.0984;0.5159,0.4849:0.5159,0.4849:0.0984;0.5897,0.689:0.6881,0.7502:0.0984;0.3356,0.7604:0.2946,0.7706:0.0287',
  71: '0.6512,0.3013:0.5766,0.3421:0.1791',
  72: '0.5019,0.3727:0.5019,0.4339:0.1263;0.2598,0.4339:0.2598,0.4339:0.1263;0.6493,0.7502:0.6493,0.7502:0.1263',
  73: '0.7181,0.1176:0.5999,0.2706:0.1091;0.5272,0.3523:0.5454,0.3013:0.1091;0.4454,0.4441:0.4454,0.4441:0.1091;0.4363,0.689:0.3817,0.7196:0.0455',
  74: '0.6974,0.1584:0.529,0.3217:0.1188;0.4795,0.3115:0.4894,0.2502:0.1188;0.3508,0.3421:0.3508,0.3421:0.1188;0.4795,0.7809:0.4894,0.8217:0.1188;0.3409,0.7502:0.3409,0.7502:0.1188',
  75: '0.7365,0.7094:0.7365,0.7094:0.0889;0.6179,0.4543:0.6179,0.3727:0.0889;0.5513,0.3931:0.4402,0.4951:0.0889;0.3216,0.3727:0.255,0.4339:0.0889;0.1661,0.3829:0.1661,0.3829:0.0889',
  76: '0.6076,0.6992:0.5695,0.74:0.0916;0.5924,0.3625:0.4397,0.4033:0.0916;0.4626,0.4237:0.4626,0.4237:0.0916;0.1954,0.3013:0.2031,0.3625:0.0916;0.6611,0.3829:0.6687,0.4033:0.0267',
  77: '0.6904,0.4339:0.6904,0.4339:0.0923;0.7442,0.1788:0.7057,0.2196:0.0923;0.6442,0.3523:0.5211,0.4747:0.0923;0.3442,0.2809:0.3442,0.2809:0.0923;0.6288,0.6686:0.6288,0.6686:0.0231;0.598,0.6788:0.5519,0.7094:0.0231;0.6211,0.6686:0.6211,0.6686:0.0192;0.7827,0.7094:0.7827,0.7502:0.0923',
  78: '0.6518,0.1788:0.4619,0.2911:0.1519;0.5505,0.3931:0.3607,0.4339:0.1519;0.2594,0.7298:0.2594,0.7298:0.1519',
  79: '0.7688,0.2196:0.6993,0.3013:0.0833;0.7479,0.3727:0.7479,0.3727:0.0833;0.5396,0.8013:0.5396,0.8013:0.0833;0.1646,0.7298:0.1577,0.7298:0.0833;0.3174,0.1992:0.3174,0.1992:0.0833;0.3868,0.4135:0.4285,0.3931:0.0833',
  80: '0.7388,0.3931:0.2943,0.4237:0.1111;0.3592,0.3523:0.7203,0.3421:0.1111;0.4425,0.7196:0.4147,0.7502:0.1111',
  81: '0.6383,0.3421:0.6383,0.3421:0.1176;0.7363,0.1584:0.5892,0.2298:0.1176',
  82: '0.7225,0.689:0.5673,0.7196:0.1034;0.3604,0.4543:0.3604,0.4543:0.1034;0.5587,0.2706:0.4983,0.3115:0.1034;0.438,0.3523:0.4725,0.3217:0.0216',
  83: '0.774,0.1992:0.7415,0.2298:0.0976;0.6764,0.4033:0.6764,0.4033:0.0976;0.5382,0.3727:0.5382,0.3727:0.0976;0.2699,0.3319:0.1805,0.4033:0.0976;0.4569,0.7196:0.5626,0.7298:0.0976',
  84: '0.7935,0.6788:0.7935,0.6788:0.0923;0.6166,0.7196:0.6166,0.7196:0.0923;0.4166,0.3829:0.5242,0.2911:0.0923;0.4012,0.4849:0.4089,0.5155:0.0769;0.4089,0.5462:0.4089,0.5462:0.0769;0.2012,0.7809:0.1396,0.8115:0.0769;0.6473,0.3319:0.6319,0.3625:0.0346;0.655,0.3727:0.655,0.3727:0.0346',
  85: '0.5115,0.5564:0.5407,0.4951:0.1165;0.4144,0.5053:0.4436,0.4441:0.1165;0.1717,0.8977:0.1717,0.8977:0.1505',
  86: '0.5472,0.2855:0.6448,0.1936:0.0976;0.6529,0.214:0.7749,0.1324:0.0976;0.5554,0.4181:0.5554,0.4181:0.0976;0.7098,0.3773:0.7098,0.3773:0.0976;0.3521,0.8059:0.3521,0.8059:0.0976',
  87: '0.6015,0.2447:0.6015,0.2447:0.1132;0.4222,0.1324:0.2901,0.2243:0.1132;0.4977,0.3875:0.4977,0.3875:0.1132',
  88: '0.7148,0.3263:0.5997,0.3875:0.0863;0.5997,0.4283:0.5997,0.4283:0.0863;0.4199,0.7243:0.4199,0.7243:0.0863;0.204,0.7447:0.1824,0.7753:0.0863;0.2616,0.51:0.3263,0.4487:0.0863;0.1752,0.3569:0.1105,0.4181:0.0863',
  89: '0.6358,0.3569:0.3586,0.4181:0.1188;0.3289,0.4589:0.3289,0.4589:0.1188;0.2596,0.7855:0.2101,0.8161:0.1188',
  90: '0.6157,0.4079:0.5248,0.4794:0.1364;0.4907,0.1732:0.3089,0.2549:0.1364;0.252,0.7651:0.218,0.7855:0.1364;0.5248,0.4998:0.5248,0.4998:0.1364',
  91: '0.6354,0.3977:0.6669,0.2753:0.0945;0.6669,0.2753:0.4858,0.3161:0.0945;0.4858,0.3161:0.4779,0.4487:0.0945;0.3913,0.7345:0.3047,0.8263:0.0945',
  92: '0.6865,0.112:0.5591,0.1936:0.1176;0.6375,0.2345:0.6375,0.2345:0.1176;0.5395,0.4998:0.5395,0.4998:0.1176;0.3728,0.7447:0.3336,0.7753:0.1176',
  93: '0.6408,0.3671:0.6408,0.3671:0.0952;0.6567,0.2038:0.5615,0.3773:0.0952;0.498,0.2855:0.3075,0.3977:0.0952;0.3154,0.4385:0.3154,0.4385:0.0952;0.4345,0.6528:0.4345,0.6528:0.0952',
  94: '0.5339,0.3875:0.5339,0.3875:0.1062;0.7198,0.6936:0.5693,0.7753:0.1062;0.5959,0.3467:0.6047,0.3773:0.0265;0.6136,0.3773:0.6136,0.3773:0.0265',
  95: '0.5938,0.4181:0.5938,0.4181:0.1237;0.6144,0.7345:0.6144,0.7345:0.1237;0.2846,0.7855:0.2846,0.7855:0.1237',
  96: '0.5282,0.1222:0.3728,0.2038:0.1165;0.6253,0.3671:0.5961,0.3875:0.1165;0.6447,0.6732:0.6447,0.6732:0.1165;0.2855,0.8263:0.2369,0.8569:0.1165',
  97: '0.6572,0.2651:0.5203,0.3671:0.1263;0.415,0.3263:0.415,0.3263:0.1263;0.5308,0.4589:0.5414,0.5202:0.1263;0.2361,0.7753:0.2361,0.7753:0.1263',
  98: '0.6847,0.4283:0.5458,0.4896:0.1111;0.5273,0.4283:0.5273,0.4283:0.1111;0.5365,0.3059:0.3699,0.3773:0.1111;0.2125,0.3467:0.1476,0.4283:0.1111',
  99: '0.7039,0.3059:0.6964,0.3671:0.0902;0.5235,0.3773:0.5235,0.3773:0.0902;0.3656,0.4691:0.3656,0.4691:0.0902;0.1701,0.3467:0.125,0.4283:0.0902;0.2077,0.7447:0.2077,0.7447:0.0902',
  100: '0.7322,0.3671:0.6705,0.4385:0.0822;0.6705,0.4589:0.6705,0.4589:0.0822;0.7459,0.6936:0.7459,0.6936:0.0822;0.5199,0.7753:0.4925,0.7957:0.0822;0.1705,0.7447:0.1431,0.7651:0.0822;0.424,0.4283:0.376,0.5202:0.0822',
  101: '0.7859,0.2038:0.6589,0.3059:0.0952;0.643,0.4487:0.643,0.4487:0.0952;0.4684,0.8059:0.4288,0.8059:0.0952;0.2859,0.4181:0.3415,0.3671:0.0952;0.1113,0.4283:0.2145,0.3059:0.0952',
  102: '0.7913,0.1426:0.676,0.2447:0.0923;0.7221,0.3569:0.7221,0.3569:0.0923;0.576,0.214:0.5221,0.2549:0.0923;0.399,0.4385:0.399,0.4385:0.0923;0.1913,0.2651:0.1452,0.3467:0.0923;0.1452,0.8059:0.1221,0.8467:0.0923',
  103: '0.654,0.3671:0.618,0.4079:0.1081;0.4198,0.4283:0.4198,0.4283:0.1081;0.6721,0.6936:0.6721,0.6936:0.1081;0.4558,0.714:0.4198,0.7447:0.1081;0.2306,0.8059:0.1856,0.8263:0.1081',
  104: '0.6128,0.1528:0.3128,0.3671:0.1333;0.4683,0.3671:0.4683,0.3671:0.1333;0.5016,0.7038:0.5016,0.8059:0.1333',
  105: '0.5672,0.4589:0.5672,0.5202:0.12;0.6372,0.714:0.6372,0.714:0.12;0.2572,0.3671:0.2672,0.4283:0.12',
  106: '0.582,0.4181:0.582,0.4181:0.1212;0.774,0.3671:0.7335,0.3977:0.1212;0.6931,0.5304:0.6931,0.5304:0.1212;0.4103,0.8059:0.3598,0.8467:0.1212',
  107: '0.8048,0.1324:0.6522,0.2243:0.1017;0.4573,0.3467:0.4234,0.4079:0.1017;0.6692,0.7345:0.6692,0.7957:0.1017',
  108: '0.6573,0.1732:0.2352,0.3671:0.1101;0.4279,0.4794:0.4279,0.4794:0.1101;0.2352,0.7855:0.1894,0.8263:0.1101',
  109: '0.7238,0.2038:0.6261,0.2855:0.0902;0.4456,0.4283:0.4306,0.4794:0.0902;0.2201,0.3773:0.1825,0.3773:0.0902;0.5208,0.7447:0.5208,0.7447:0.0902',
  110: '0.707,0.2038:0.4049,0.4181:0.125;0.6133,0.3875:0.6133,0.3875:0.125;0.457,0.714:0.4049,0.7549:0.125',
  111: '0.6596,0.2447:0.3477,0.4487:0.129;0.5413,0.7243:0.4553,0.7753:0.129;0.6811,0.7651:0.6918,0.8365:0.129',
  112: '0.5884,0.3671:0.5884,0.3671:0.0952;0.5329,0.214:0.5329,0.214:0.0952;0.2948,0.3671:0.3027,0.4181:0.0952;0.7392,0.6936:0.7392,0.6936:0.0952',
  113: '0.7665,0.1834:0.5261,0.3365:0.1154;0.4684,0.1222:0.2953,0.2345:0.1154;0.2857,0.8263:0.228,0.8773:0.1154',
  114: '0.7514,0.189:0.6112,0.2911:0.1121;0.6579,0.3727:0.6579,0.3727:0.1121;0.6112,0.4339:0.6112,0.4339:0.1121;0.3588,0.3625:0.3588,0.4339:0.1121',
};

/**
 * Root
 */
const Root = styled('section', {
  shouldForwardProp: (prop: PropertyKey) => !([
    'textColor',
    'altTextColor',
    'backgroundColor',
    'opacity',
    'blurAmount',
    'contentLength',
  ]).includes(prop.toString()),
})<Partial<Props & { contentLength: number }>>(({
  textColor,
  altTextColor,
  backgroundColor,
  opacity,
  blurAmount,
  contentLength,
}) => css`
  position: relative;

  /* widget */

  .wb-quran-widget {
    padding: ${toRem(8)} ${toRem(20)};
    background: ${typeof opacity !== 'undefined' ? Color(backgroundColor).alpha(opacity).string() : backgroundColor};
    border-radius: ${toRem(999)};
    backdrop-filter: blur(${toRem(blurAmount ?? 10)});
    animation: wb-quran-widget-appear 400ms ease-out 400ms both;

    @keyframes wb-quran-widget-appear {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  }

  .wb-quran-widget__sura {
    position: absolute;
    bottom: ${toRem(100)};
    left: 50%;
    white-space: nowrap;
    user-select: none;
    font-size: ${toRem(42)};
    color: ${textColor};
    transform: translate(-50%, 0);
    filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.1));

    .wb-diacritics {
      color: ${altTextColor};
    }

    > * + * {
      margin-inline-start: ${toRem(5)};
    }

    .wb-quran-widget__parentheses-start,
    .wb-quran-widget__parentheses-end {
      top: ${toRem(35)};
      margin: 0;
    }
  }

  .wb-quran-widget__sura-en {
    margin: -${toRem(5)} 0 ${toRem(10)};
    white-space: nowrap;
    font-size: ${toRem(14)};
    text-transform: capitalize;
    color: ${altTextColor};
    filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.1));
  }

  .wb-quran-widget__head {
    margin: 0 0 ${toRem(15)} 0;
    font-size: ${toRem(21)};
    font-weight: 300;
    line-height: 1.5;
    color: ${altTextColor};

    *::selection {
      background-color: ${Color(altTextColor).fade(0.9).string()};
    }
  }

  .wb-quran-widget__content {
    position: relative;
    display: block;
    margin: ${toRem(5)} 0;
    font-size: ${toRem(24 * Math.min(1, Math.max(0.75, 375 / contentLength!)))};
    text-shadow: 0 1px rgba(0, 0, 0, 0.1);
    color: ${textColor};

    .wb-diacritics {
      color: ${altTextColor};
    }

    *::selection {
      background-color: ${Color(textColor).fade(0.9).string()};
    }

    .wb-aya {
      margin: 0 ${toRem(10)} 0 0;

      > svg {
        color: ${altTextColor};
      }
    }
  }

  .wb-quran-widget__translation {
    direction: ltr;
    position: absolute;
    top: ${toRem(85)};
    left: 50%;
    min-width: 50vw;
    font-size: ${toRem(16)};
    color: ${altTextColor};
    transform: translate(-50%, 0);
    filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.1));
  }

  .wb-quran-widget__tail {
    margin: ${toRem(15)} 0 0;
    font-size: ${toRem(21)};
    font-weight: 300;
    line-height: 1.5;
    color: ${altTextColor};

    *::selection {
      background-color: ${Color(altTextColor).fade(0.9).string()};
    }
  }

  .wb-quran-widget__parentheses-start,
  .wb-quran-widget__parentheses-end {
    display: inline-block;
    width: ${toRem(14)};
    height: ${toRem(43)};
    margin: 0 ${toRem(10)};
    position: absolute;
    top: 50%;
    right: -${toRem(30)};
    color: ${altTextColor};
    transform: translate(0, -50%);
  }

  .wb-quran-widget__parentheses-end {
    right: auto;
    left: -${toRem(30)};
    transform: scaleX(-1) translate(0, -50%);
  }
`);

/**
 * QuranWidget Component
 */
export interface Props {
  head?: string,
  content: string,
  tail?: string,
  sura?: number,
  aya?: string | number,
  translation?: string,
  showTranslation?: boolean,
  textColor?: string,
  altTextColor?: string,
  backgroundColor?: string,
  opacity?: number,
  blurAmount?: number,
  stylingData?: string,
}

const QuranWidget: React.FC<Props & JSX.IntrinsicElements['section']> = ({
  head,
  content,
  tail,
  sura,
  aya,
  translation,
  showTranslation,
  textColor,
  altTextColor,
  stylingData,
  ...props
}) => {
  const mappedContent = content.split(/(\d+)/g).filter(Boolean).map((value, n) => {
    if (!isNaN(+value)) {
      return (
        <Aya key={n} number={value.trim()} />
      )
    }

    return (
      value.trim().split(/(\s)/g).map((part, m) => {
        if (part === ' ') return part;

        if (stylingData) {
          return (
            <StyledDiacritics
              key={m}
              text={part}
              type="naskh"
              inline
              data={stylingData}
            />
          );
        }

        return (
          <StackedDiacritics
            key={m}
            text={part}
            type="naskh"
            inline
          />
        );
      })
    )
  });

  return (
    <Root
      {...props}
      textColor={textColor}
      altTextColor={altTextColor}
      className={classnames('wb-quran-widget-wrapper', props.className)}
      contentLength={removeDiacritics(content).length}
    >
      <div className="wb-quran-widget">
        {
          sura && (
            <div className="wb-quran-widget__sura">
              <StyledDiacritics
                text="سُـــــورَةُ"
                type="thuluth"
                inline
                data="0.782,0.665:0.6693,0.705:0.0423;0.6552,0.505:0.7397,0.4117:0.0704;0.3172,0.4383:0.3735,0.3983:0.0704;0.1482,0.3717:0.2327,0.2917:0.0704"
                textColor={textColor}
                diacriticsColor={altTextColor}
              />

              {
                suraNameColorizationData[sura] ? (
                  <StyledDiacritics
                    text={surasData[sura - 1].name_decorated}
                    type="thuluth"
                    inline
                    data={suraNameColorizationData[sura]}
                    textColor={textColor}
                    diacriticsColor={altTextColor}
                  />
                ) : (
                  <StackedDiacritics
                    text={surasData[sura - 1].name_decorated}
                    type="thuluth"
                    inline
                  />
                )
              }

              {
                showTranslation && (
                  <Text type="latin" className="wb-quran-widget__sura-en">
                    {surasData[sura - 1].name_en}
                  </Text>
                )
              }
              
              <ParenthesesSVG className="wb-quran-widget__parentheses-start" />
              <ParenthesesSVG className="wb-quran-widget__parentheses-end" />
            </div>
          )
        }
        
        {
          head && (
            <div className="wb-quran-widget__head">
              <Text type="naskh">
                {head}
              </Text>
            </div>
          )
        }

        <div className="wb-quran-widget__content">
          {mappedContent}
        </div>

        {
          showTranslation && translation && (
            <div className="wb-quran-widget__translation">
              <Text type="latin" light>
                {translation}
              </Text>
            </div>
          )
        }

        {
          tail && (
            <div className="wb-quran-widget__tail">
              <Text type="naskh">
                {tail}
              </Text>
            </div>
          )
        }
      </div>
    </Root>
  );
};

QuranWidget.defaultProps = {
  head: '',
  tail: '',
  aya: undefined,
  sura: undefined,
  translation: '',
  showTranslation: true,
  textColor: '#fff',
  altTextColor: '#000',
  backgroundColor: '#000',
  opacity: 0.3,
  blurAmount: 10,
};

export default QuranWidget;
